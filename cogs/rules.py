import discord
from typing import Optional
from discord import app_commands
from discord.ext import commands
from main import RMC_EMBED_COLOR

class Rules(commands.Cog):
    """Cog –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –ø—Ä–∞–≤–∏–ª —Å–µ—Ä–≤–µ—Ä–∞."""

    def __init__(self, bot: commands.Bot):
        self.bot = bot

    @commands.hybrid_command(
        name="rule",
        with_app_command=True,
        description="–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ø—É–Ω–∫—Ç –ø—Ä–∞–≤–∏–ª —Å–µ—Ä–≤–µ—Ä–∞."
    )
    @app_commands.describe(rule_id="–í—ã–±–µ—Ä–∏—Ç–µ –ø—É–Ω–∫—Ç –ø—Ä–∞–≤–∏–ª")
    @app_commands.choices(rule_id=[
        app_commands.Choice(name="help", value="help"),
        app_commands.Choice(name="1", value="1"),
        app_commands.Choice(name="2", value="2"),
        app_commands.Choice(name="3", value="3"),
        app_commands.Choice(name="4", value="4"),
        app_commands.Choice(name="5", value="5"),
        app_commands.Choice(name="6", value="6"),
        app_commands.Choice(name="7", value="7"),
        app_commands.Choice(name="8", value="8"),
        app_commands.Choice(name="9", value="9"),
        app_commands.Choice(name="10", value="10"),
        app_commands.Choice(name="11", value="11"),
        app_commands.Choice(name="12", value="12"),
        app_commands.Choice(name="13", value="13"),
        app_commands.Choice(name="14", value="14"),
        app_commands.Choice(name="15", value="15"),
        app_commands.Choice(name="basis", value="basis"),
        app_commands.Choice(name="link", value="link")
    ])
    async def rule(self, ctx: commands.Context, rule_id: Optional[str] = None):
        """–ü–æ–∫–∞–∑–∞—Ç—å –ø—É–Ω–∫—Ç –ø—Ä–∞–≤–∏–ª –ø–æ –Ω–æ–º–µ—Ä—É –∏–ª–∏ help."""

        rules_map = {
            "help": "–î–æ—Å—Ç—É–ø–Ω–æ –¥–ª—è –≤–≤–æ–¥–∞: `help`, –ø—É–Ω–∫—Ç—ã –ø—Ä–∞–≤–∏–ª 1-15, `basis`, `link`.",
            "1": "1. –õ—é–±—ã–µ –ø–æ–ø—ã—Ç–∫–∏ –≤–∑–ª–æ–º–∞, –∫—Ä–∞—à–∞, —Ä–µ–π–¥–∞ —Å–µ—Ä–≤–µ—Ä–∞, —Ä–∞–∑–º–µ—â–µ–Ω–∏—è —Ñ–∏—à–∏–Ω–≥–æ–≤—ã—Ö —Å—Å—ã–ª–æ–∫, –≤—Ä–µ–¥–æ–Ω–æ—Å–Ω–æ–≥–æ –ü–û –∏ –ø—Ä–æ—á–∏—Ö —Å–æ–º–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ –∫–∞—Ä–∞—é—Ç—Å—è –ø–µ—Ä–º–∞–Ω–µ–Ω—Ç–Ω—ã–º –±–∞–Ω–æ–º.",
            "2": "2. –ó–∞–ø—Ä–µ—â–µ–Ω–∞ –ª—é–±–∞—è —Ä–µ–∫–ª–∞–º–∞ –±–µ–∑ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ü–∏–∏ —Å–µ—Ä–≤–µ—Ä–∞.",
            "3": "3. –ó–∞–ø—Ä–µ—â–µ–Ω—ã —à–æ–∫-–∫–æ–Ω—Ç–µ–Ω—Ç, NSFW-–∫–æ–Ω—Ç–µ–Ω—Ç, –Ω–∞—Å–∏–ª–∏–µ –∏ –ø—Ä–æ—á–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç, –Ω–∞—Ä—É—à–∞—é—â–∏–π –º–æ—Ä–∞–ª—å–Ω—ã–µ –Ω–æ—Ä–º—ã. –ó–∞ –ø–æ–¥–æ–±–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è –æ–±—ã—á–Ω–æ —Å–ª–µ–¥—É–µ—Ç –±–∞–Ω.",
            "4": "4. –ó–∞–ø—Ä–µ—â–µ–Ω—ã —Å–∏—Å—Ç–µ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –æ—Å–∫–æ—Ä–±–ª–µ–Ω–∏—è, —É–≥—Ä–æ–∑—ã –≤ –∞–¥—Ä–µ—Å —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤, –º–æ–¥–µ—Ä–æ–≤ –∏ –ø—Ä–æ–µ–∫—Ç–æ–≤.",
            "5": "5. –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–∏–≤–Ω–∞—è –∫—Ä–∏—Ç–∏–∫–∞ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤—É–µ—Ç—Å—è, –Ω–µ–æ–±–æ—Å–Ω–æ–≤–∞–Ω–Ω—ã–µ –∞–≥—Ä–µ—Å—Å–∏–≤–Ω—ã–µ –≤—ã—Å–∫–∞–∑—ã–≤–∞–Ω–∏—è –±—É–¥—É—Ç –º–æ–¥–µ—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è.",
            "6": "6. –ü–æ–ª–∏—Ç–∏—á–µ—Å–∫–∏–µ, —Ä–µ–ª–∏–≥–∏–æ–∑–Ω—ã–µ –¥–∏—Å–∫—É—Å—Å–∏–∏ –∑–∞–ø—Ä–µ—â–µ–Ω—ã –ø–æ–≤—Å–µ–º–µ—Å—Ç–Ω–æ, –∫—Ä–æ–º–µ –∫–∞–Ω–∞–ª–∞ `–ø–æ–ª–∏—Ç-—á–∞—Ç` —Å —Ä–æ–ª—å—é `–î–∏–≤–∞–Ω–Ω—ã–π –ø–æ–ª–∏—Ç–∏–∫`. –ï—Å–ª–∏ —Ä–∞–∑–≥–æ–≤–æ—Ä —Å–ª–æ–∂–∏–ª—Å—è —Ç–∞–∫–∏–º –æ–±—Ä–∞–∑–æ–º –∏–ª–∏ –Ω–∞ –ø–æ–¥–æ–±–Ω—É—é —Ç–µ–º—É, —Ç–æ —Å–ª–µ–¥—É–µ—Ç –ø–µ—Ä–µ–π—Ç–∏ –≤ –¥–∞–Ω–Ω—ã–π –∫–∞–Ω–∞–ª. –í—Å–µ –æ—Å—Ç–∞–ª—å–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞ –≤ –¥–∞–Ω–Ω–æ–º –∫–∞–Ω–∞–ª–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç —Å–≤–æ—é —Å–∏–ª—É.",
            "7": "7. –ó–∞–ø—Ä–µ—â–µ–Ω–æ —Å–ø–∞–º–∏—Ç—å, —Ñ–ª—É–¥–∏—Ç—å, –ø–æ–ø—Ä–æ—à–∞–π–Ω–∏—á–∞—Ç—å, –∫–∞–ø—Å–∏—Ç—å –±–µ–∑ –º–µ—Ä—ã. –ó–∞–ø—Ä–µ—â—ë–Ω –∏ —è–≤–ª—è–µ—Ç—Å—è –±–æ–ª–µ–µ —Ç—è–∂–∫–∏–º –ø—Ä–æ—Å—Ç—É–ø–∫–æ–º –Ω–µ–æ–±–æ—Å–Ω–æ–≤–∞–Ω–Ω—ã–π –º–∞—Å—Å–æ–≤—ã–π –ø–∏–Ω–≥.",
            "8": "8. –ó–∞–ø—Ä–µ—â–µ–Ω—ã –ø—Ä–æ–≤–æ–∫–∞—Ü–∏–∏ –∏ –ø—Ä–∏–∑—ã–≤—ã –∫ –Ω–∞—Å–∏–ª–∏—é, —Ä–∞—Å–∏–∑–º—É, —Ç–µ—Ä—Ä–æ—Ä–∏–∑–º—É –∏ —Ç.–¥.",
            "9": "9. –ó–∞–ø—Ä–µ—â–µ–Ω—ã –ª—é–±—ã–µ –∞–∫—Ü–∏–∏ –æ—Ç –∏–º–µ–Ω–∏ –†–ú–ö –±–µ–∑ –≤–µ–¥–æ–º–∞ –∏ —Å–æ–≥–ª–∞—Å–∏—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ü–∏–∏ –†–ú–ö.",
            "10": "10. –ó–∞–ø—Ä–µ—â–µ–Ω–æ –≤—ã–¥–∞–≤–∞—Ç—å —Å–µ–±—è –∑–∞ –¥—Ä—É–≥–æ–≥–æ —á–µ–ª–æ–≤–µ–∫–∞ –±–µ–∑ –µ–≥–æ –≤–µ–¥–æ–º–∞ –∏ —Å–æ–≥–ª–∞—Å–∏—è. –ó–∞–ø—Ä–µ—â–µ–Ω–æ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –ª–∏—á–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –¥—Ä—É–≥–∏—Ö –ª—é–¥–µ–π, –∞ —Ç–∞–∫–∂–µ –ª–∏—á–Ω—ã—Ö —Å–≤–µ–¥–µ–Ω–∏–π, –ø–æ—Ä–æ—á–∞—â–∏—Ö –∏—Ö.",
            "11": "11. –ù–µ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤—É–µ—Ç—Å—è –Ω–∞–º–µ—Ä–µ–Ω–Ω—ã–π –ø–æ–∏—Å–∫ –∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –ª–∞–∑–µ–µ–∫ –≤ –ø—Ä–∞–≤–∏–ª–∞—Ö. –õ—é–±—ã–µ –º–∞—Ö–∏–Ω–∞—Ü–∏–∏ —Å —Ç–æ–ª–∫–æ–≤–∞–Ω–∏–µ–º —Ç–µ–∫—Å—Ç–∞ –ø—Ä–∞–≤–∏–ª –Ω–µ –±—É–¥—É—Ç —Ä–∞—Å—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å—Å—è –∫–∞–∫ –∞—Ä–≥—É–º–µ–Ω—Ç.",
            "12": "12. –ù–∞–∫–∞–∑–∞–Ω–∏–µ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è –Ω–∞ –≤—Å–µ –∞–∫–∫–∞—É–Ω—Ç—ã —É—á–∞—Å—Ç–Ω–∏–∫–∞.",
            "13": "13. –ö–∞–∂–¥—ã–π —á–ª–µ–Ω –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ü–∏–∏ –Ω–µ –æ–±—è–∑–∞–Ω —Ç–µ—Ä–ø–µ—Ç—å –∫—Ä–∏—Ç–∏–∫—É –∏ –æ—Å–∫–æ—Ä–±–ª–µ–Ω–∏—è –≤ –∞–¥—Ä–µ—Å —Å–µ—Ä–≤–µ—Ä–∞ –∏–ª–∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ü–∏–∏.",
            "14": "14. –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–µ –æ–±—è–∑–∞–Ω–∞ –æ—Ç–≤–µ—á–∞—Ç—å –Ω–∞ –ª–∏—á–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è.",
            "15": "15. –î–µ–π—Å—Ç–≤–∏—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ü–∏–∏ –æ–±—Å—É–∂–¥–µ–Ω–∏—é –Ω–µ –ø–æ–¥–ª–µ–∂–∞—Ç.",
            "basis": "–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ü–∏—è –∏–º–µ–µ—Ç –ø—Ä–∞–≤–æ —Å–∞–º–æ–π –≤—ã–±–∏—Ä–∞—Ç—å –º–µ—Ä—É –Ω–∞–∫–∞–∑–∞–Ω–∏—è –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç—è–∂–µ—Å—Ç–∏ –Ω–∞—Ä—É—à–µ–Ω–∏—è. –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ü–∏—è —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –∑–∞ —Å–æ–±–æ–π –ø—Ä–∞–≤–æ –≤—ã–Ω–æ—Å–∏—Ç—å –Ω–∞–∫–∞–∑–∞–Ω–∏–µ –±–µ–∑ –æ–±—ä—è—Å–Ω–µ–Ω–∏—è –ø—Ä–∏—á–∏–Ω—ã –∏ –æ—Ç—Å—ã–ª–∫–∏ –Ω–∞ –æ–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞, –∞ —Ç–∞–∫–∂–µ –Ω–µ –ø—Ä–∏–º–µ–Ω—è—Ç—å –Ω–∞–∫–∞–∑–∞–Ω–∏—è –≤ —Ç–µ—Ö —Å–ª—É—á–∞—è—Ö, –∫–æ–≥–¥–∞ –ø–æ—Å—á–∏—Ç–∞–µ—Ç —ç—Ç–æ –Ω—É–∂–Ω—ã–º.",
            "link": "https://discord.com/channels/1283116690678485125/1283118892880887868/1331716635257606184"
        }

        if rule_id is None or rule_id == "help":
            # Embed –¥–ª—è —Å–ø—Ä–∞–≤–∫–∏
            embed = discord.Embed(
                title="üìñ –°–ø—Ä–∞–≤–∫–∞ –ø–æ –∫–æ–º–∞–Ω–¥–µ rule",
                description="–î–æ—Å—Ç—É–ø–Ω—ã–µ –ø—É–Ω–∫—Ç—ã –ø—Ä–∞–≤–∏–ª:",
                color=RMC_EMBED_COLOR
            )
            
            # –î–æ–±–∞–≤–ª—è–µ–º –≤—Å–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ –ø—É–Ω–∫—Ç—ã
            for i in range(1, 16):
                embed.add_field(
                    name=f"–ü—Ä–∞–≤–∏–ª–æ {i}",
                    value=f"–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `!rmc rule {i}` –∏–ª–∏ `/rule {i}`",
                    inline=True
                )
            
            embed.add_field(
                name="–û—Å–Ω–æ–≤–∞ –æ—Å–Ω–æ–≤",
                value="`!rmc rule basis` –∏–ª–∏ `/rule basis`",
                inline=False
            )
            
            embed.add_field(
                name="–°—Å—ã–ª–∫–∞ –Ω–∞ –ø—Ä–∞–≤–∏–ª–∞",
                value="`!rmc rule link` –∏–ª–∏ `/rule link`",
                inline=False
            )
            
            embed.set_footer(text="–í—ã–±–µ—Ä–∏—Ç–µ –Ω—É–∂–Ω—ã–π –ø—É–Ω–∫—Ç –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞")
            await ctx.send(embed=embed)
            return

        answer = rules_map.get(rule_id)
        if answer:
            # Embed –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ø—Ä–∞–≤–∏–ª–∞
            if rule_id.isdigit():
                title = f"üìú –ü—Ä–∞–≤–∏–ª–æ {rule_id}"
                color = RMC_EMBED_COLOR  # –ö—Ä–∞—Å–Ω—ã–π –¥–ª—è –ø—Ä–∞–≤–∏–ª
            elif rule_id == "basis":
                title = "‚öñÔ∏è –û—Å–Ω–æ–≤–∞ –æ—Å–Ω–æ–≤"
                color = RMC_EMBED_COLOR  # –û—Ä–∞–Ω–∂–µ–≤—ã–π
            else:  # link
                title = "üîó –°—Å—ã–ª–∫–∞ –Ω–∞ –ø—Ä–∞–≤–∏–ª–∞"
                color = RMC_EMBED_COLOR  # –§–∏–æ–ª–µ—Ç–æ–≤—ã–π
            
            embed = discord.Embed(
                title=title,
                description=answer,
                color=color,
                timestamp=discord.utils.utcnow()
            )
            
            # –î–æ–±–∞–≤–ª—è–µ–º —Ä–∞–∑–Ω—ã–µ —Ñ—É—Ç–µ—Ä—ã –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–∏–ø–∞
            if rule_id.isdigit():
                embed.set_footer(text="–°–æ–±–ª—é–¥–∞–π—Ç–µ –ø—Ä–∞–≤–∏–ª–∞ —Å–µ—Ä–≤–µ—Ä–∞!")
            elif rule_id == "basis":
                embed.set_footer(text="–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ü–∏—è –æ—Å—Ç–∞–≤–ª—è–µ—Ç –∑–∞ —Å–æ–±–æ–π –ø—Ä–∞–≤–æ —Ç—Ä–∞–∫—Ç–æ–≤–∞—Ç—å –ø—Ä–∞–≤–∏–ª–∞")
            else:
                embed.set_footer(text="–ü–æ–ª–Ω–∞—è –≤–µ—Ä—Å–∏—è –ø—Ä–∞–≤–∏–ª –¥–æ—Å—Ç—É–ø–Ω–∞ –ø–æ —Å—Å—ã–ª–∫–µ")
            
            await ctx.send(embed=embed)
        else:
            # Embed –¥–ª—è –æ—à–∏–±–∫–∏
            embed = discord.Embed(
                title="‚ùå –û—à–∏–±–∫–∞",
                description=f"–ü—É–Ω–∫—Ç–∞ `{rule_id}` –Ω–µ—Ç –≤ –ø—Ä–∞–≤–∏–ª–∞—Ö!",
                color=RMC_EMBED_COLOR
            )
            embed.add_field(
                name="–î–æ—Å—Ç—É–ø–Ω—ã–µ –ø—É–Ω–∫—Ç—ã",
                value="1-15, basis, link",
                inline=False
            )
            embed.set_footer(text="–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ !rmc rule help –¥–ª—è —Å–ø—Ä–∞–≤–∫–∏")
            await ctx.send(embed=embed)

async def setup(bot: commands.Bot):
    await bot.add_cog(Rules(bot))
